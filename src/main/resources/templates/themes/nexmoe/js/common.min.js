var Skin={init:function(){Skin._initToc(),Util.initPjax((function(){0===$(".post__fix").length?$("body").addClass("body--gray"):$("body").removeClass("body--gray"),$(".header__nav a").each((function(){console.log(this.href),console.log(location.href),this.href===location.href?this.className="active nexmoe-list-item mdui-list-item mdui-ripple":this.className="nexmoe-list-item mdui-list-item mdui-ripple"})),Skin._initToc()})),$(".header__nav a").each((function(){this.href===location.href&&(this.className="active nexmoe-list-item mdui-list-item mdui-ripple")})).click((function(){$(".header__nav a").removeClass("active"),this.href===location.href&&(this.className="active nexmoe-list-item mdui-list-item mdui-ripple")})),$(".post__toc .article__toc").find("li").find("a").on("click",(function(t){t.preventDefault();let i=$(this).attr("href");$("html,body").animate({scrollTop:$(i).offset().top},800)}))},_initToc:function(){let t=$(".nexmoe-post-cover img:eq(0)").attr("data-src"),i=$("article p:eq(0) img:eq(0)").attr("data-src");if(null==i&&(i=$("article p:eq(0) img:eq(0)").attr("src")),t==i&&null!=t&&$("article img:eq(0)").remove(),0!==$(".article__toc").length){var e=$(".vditor-reset [id^=b3_solo_h]"),o=$(".article__toc");$(window).unbind("scroll").scroll((function(t){if(0===$(".article__toc li").length)return!1;if($(window).scrollTop()>72){$(".post__toc").show();var i=[];e.each((function(t){i.push({id:this.id,offsetTop:this.offsetTop})}));for(var n=$(window).scrollTop(),a=0,s=i.length;a<s;a++)if(n<i[a].offsetTop-20){o.find("li").removeClass("current");var c=a>0?a-1:0;o.find('a[href="#'+i[c].id+'"]').parent().addClass("current");break}n>=i[i.length-1].offsetTop-20&&(o.find("li").removeClass("current"),o.find("li:last").addClass("current"))}else $(".post__toc").hide()})),$(window).scroll()}},_initShare:function(){var t=$(".post__share"),i=t.find(".post__code"),e=i.data("url"),o=i.data("avatar"),n=encodeURIComponent(i.data("title")+" - "+i.data("blogtitle")),a=encodeURIComponent(e),s={};s.weibo="http://v.t.sina.com.cn/share/share.php?title="+n+"&url="+a+"&pic="+o,s.qqz="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+a+"&sharesource=qzone&title="+n+"&pics="+o,s.twitter="https://twitter.com/intent/tweet?status="+n+" "+a,t.find("span").click((function(){var t=$(this).data("type");if(t)return"wechat"===t?(0===i.find("canvas").length?$.ajax({method:"GET",url:Label.staticServePath+"/js/lib/jquery.qrcode.min.js",dataType:"script",cache:!0,success:function(){i.qrcode({width:128,height:128,text:e})}}):i.find("canvas").slideToggle(),!1):void window.open(s[t],"_blank","top=100,left=200,width=648,height=618")}))},initArticle:function(){Skin._initShare(),Skin._initToc()}};Skin.init();